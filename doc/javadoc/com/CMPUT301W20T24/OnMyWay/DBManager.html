<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_212-release) on Thu Mar 12 23:07:50 MDT 2020 -->
<title>DBManager</title>
<meta name="date" content="2020-03-12">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DBManager";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/CMPUT301W20T24/OnMyWay/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/CMPUT301W20T24/OnMyWay/CustomListDriverRequest.html" title="class in com.CMPUT301W20T24.OnMyWay"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/CMPUT301W20T24/OnMyWay/DriverMapActivity.html" title="class in com.CMPUT301W20T24.OnMyWay"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/CMPUT301W20T24/OnMyWay/DBManager.html" target="_top">Frames</a></li>
<li><a href="DBManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.CMPUT301W20T24.OnMyWay</div>
<h2 title="Class DBManager" class="title">Class DBManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.CMPUT301W20T24.OnMyWay.DBManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">DBManager</span>
extends java.lang.Object</pre>
<div class="block">Manages communication with Firebase Auth and Firestore so other classes don't have to. This should probably be a singleton</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/CMPUT301W20T24/OnMyWay/DBManager.html#DBManager--">DBManager</a></span>()</code>
<div class="block">Constructor for DBManager.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/CMPUT301W20T24/OnMyWay/DBManager.html#fetchCurrentUserInfo--">fetchCurrentUserInfo</a></span>()</code>
<div class="block">Gets the info of the currently logged in user and saves it to State (phone, rating, etc).</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/CMPUT301W20T24/OnMyWay/DBManager.html#fetchUserInfo-java.lang.String-">fetchUserInfo</a></span>(java.lang.String&nbsp;userId)</code>
<div class="block">Gets the info of a user given their userId.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>com.google.firebase.auth.FirebaseUser</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/CMPUT301W20T24/OnMyWay/DBManager.html#getFirebaseUser--">getFirebaseUser</a></span>()</code>
<div class="block">Returns the current FirebaseUser or null if there is no user logged in.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/CMPUT301W20T24/OnMyWay/DBManager.html#loginUser-java.lang.String-java.lang.String-android.app.Activity-">loginUser</a></span>(java.lang.String&nbsp;emailAddress,
         java.lang.String&nbsp;password,
         android.app.Activity&nbsp;parentActivity)</code>
<div class="block">Takes an email address, password, and parent activity, and tries to login using Firebase Auth.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/CMPUT301W20T24/OnMyWay/DBManager.html#logoutUser--">logoutUser</a></span>()</code>
<div class="block">Logs out the current user from Firebase Auth.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/CMPUT301W20T24/OnMyWay/DBManager.html#pushUserInfo-com.CMPUT301W20T24.OnMyWay.User-">pushUserInfo</a></span>(<a href="../../../com/CMPUT301W20T24/OnMyWay/User.html" title="class in com.CMPUT301W20T24.OnMyWay">User</a>&nbsp;updatedUser)</code>
<div class="block">Takes a User object and stores it in the Firestore database</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/CMPUT301W20T24/OnMyWay/DBManager.html#setCurrentUserInfoPulledListener-com.CMPUT301W20T24.OnMyWay.CurrentUserInfoPulledListener-">setCurrentUserInfoPulledListener</a></span>(<a href="../../../com/CMPUT301W20T24/OnMyWay/CurrentUserInfoPulledListener.html" title="interface in com.CMPUT301W20T24.OnMyWay">CurrentUserInfoPulledListener</a>&nbsp;currentUserInfoPulledListener)</code>
<div class="block">Method to set up this listener</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/CMPUT301W20T24/OnMyWay/DBManager.html#setLoginListener-com.CMPUT301W20T24.OnMyWay.LoginListener-">setLoginListener</a></span>(<a href="../../../com/CMPUT301W20T24/OnMyWay/LoginListener.html" title="interface in com.CMPUT301W20T24.OnMyWay">LoginListener</a>&nbsp;loginListener)</code>
<div class="block">Method to set up this listener</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/CMPUT301W20T24/OnMyWay/DBManager.html#setUserInfoPulledListener-com.CMPUT301W20T24.OnMyWay.UserInfoPulledListener-">setUserInfoPulledListener</a></span>(<a href="../../../com/CMPUT301W20T24/OnMyWay/UserInfoPulledListener.html" title="interface in com.CMPUT301W20T24.OnMyWay">UserInfoPulledListener</a>&nbsp;userInfoPulledListener)</code>
<div class="block">Method to set up this listener</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DBManager--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DBManager</h4>
<pre>public&nbsp;DBManager()</pre>
<div class="block">Constructor for DBManager. Initializes auth and db which are singletons</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setLoginListener-com.CMPUT301W20T24.OnMyWay.LoginListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLoginListener</h4>
<pre>public&nbsp;void&nbsp;setLoginListener(<a href="../../../com/CMPUT301W20T24/OnMyWay/LoginListener.html" title="interface in com.CMPUT301W20T24.OnMyWay">LoginListener</a>&nbsp;loginListener)</pre>
<div class="block">Method to set up this listener</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>loginListener</code> - A LoginListener. This is the interface that will be called when a user
                      is either logged in or there is a failure</dd>
</dl>
</li>
</ul>
<a name="setCurrentUserInfoPulledListener-com.CMPUT301W20T24.OnMyWay.CurrentUserInfoPulledListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCurrentUserInfoPulledListener</h4>
<pre>public&nbsp;void&nbsp;setCurrentUserInfoPulledListener(<a href="../../../com/CMPUT301W20T24/OnMyWay/CurrentUserInfoPulledListener.html" title="interface in com.CMPUT301W20T24.OnMyWay">CurrentUserInfoPulledListener</a>&nbsp;currentUserInfoPulledListener)</pre>
<div class="block">Method to set up this listener</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>currentUserInfoPulledListener</code> - A CurrentUserInfoPulledListener. This is the method
                                      that will be called after info for the current user
                                      is fetched, or there is an error</dd>
</dl>
</li>
</ul>
<a name="setUserInfoPulledListener-com.CMPUT301W20T24.OnMyWay.UserInfoPulledListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUserInfoPulledListener</h4>
<pre>public&nbsp;void&nbsp;setUserInfoPulledListener(<a href="../../../com/CMPUT301W20T24/OnMyWay/UserInfoPulledListener.html" title="interface in com.CMPUT301W20T24.OnMyWay">UserInfoPulledListener</a>&nbsp;userInfoPulledListener)</pre>
<div class="block">Method to set up this listener</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>userInfoPulledListener</code> - A UserInfoPulledListener. This is the method that will be
                               called after info for a user is fetched, or there is an error</dd>
</dl>
</li>
</ul>
<a name="loginUser-java.lang.String-java.lang.String-android.app.Activity-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loginUser</h4>
<pre>public&nbsp;void&nbsp;loginUser(java.lang.String&nbsp;emailAddress,
                      java.lang.String&nbsp;password,
                      android.app.Activity&nbsp;parentActivity)</pre>
<div class="block">Takes an email address, password, and parent activity, and tries to login using Firebase Auth.
 It calls loginListener.onLoginSuccess() if successful and loginListener.onLoginFailure() otherwise</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>emailAddress</code> - A String. This is the email to use for login</dd>
<dd><code>password</code> - A String. This is the password to use for login</dd>
<dd><code>parentActivity</code> - An Activity. This is only required so that auth can attach a callback to it</dd>
</dl>
</li>
</ul>
<a name="getFirebaseUser--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFirebaseUser</h4>
<pre>public&nbsp;com.google.firebase.auth.FirebaseUser&nbsp;getFirebaseUser()</pre>
<div class="block">Returns the current FirebaseUser or null if there is no user logged in.
 This function is required because we will have a FirebaseUser before we have a User</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The current FirebaseUser or null if there is no user logged in</dd>
</dl>
</li>
</ul>
<a name="logoutUser--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logoutUser</h4>
<pre>public&nbsp;void&nbsp;logoutUser()</pre>
<div class="block">Logs out the current user from Firebase Auth. This shouldn't be called on its own.
 Call the logout method in State to clean up local data and log out online as well</div>
</li>
</ul>
<a name="fetchCurrentUserInfo--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchCurrentUserInfo</h4>
<pre>public&nbsp;void&nbsp;fetchCurrentUserInfo()</pre>
<div class="block">Gets the info of the currently logged in user and saves it to State (phone, rating, etc).
 This should be called after the user is logged in using Firebase Auth to get the user's
 profile information</div>
</li>
</ul>
<a name="fetchUserInfo-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchUserInfo</h4>
<pre>public&nbsp;void&nbsp;fetchUserInfo(java.lang.String&nbsp;userId)</pre>
<div class="block">Gets the info of a user given their userId. onUserInfoPulled() listener is called with a
 new User object after the method finishes</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>userId</code> - A String. The userId of the user who's profile information we want to fetch</dd>
</dl>
</li>
</ul>
<a name="pushUserInfo-com.CMPUT301W20T24.OnMyWay.User-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>pushUserInfo</h4>
<pre>public&nbsp;void&nbsp;pushUserInfo(<a href="../../../com/CMPUT301W20T24/OnMyWay/User.html" title="class in com.CMPUT301W20T24.OnMyWay">User</a>&nbsp;updatedUser)</pre>
<div class="block">Takes a User object and stores it in the Firestore database</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>updatedUser</code> - The User we want to push to the database</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/CMPUT301W20T24/OnMyWay/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/CMPUT301W20T24/OnMyWay/CustomListDriverRequest.html" title="class in com.CMPUT301W20T24.OnMyWay"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/CMPUT301W20T24/OnMyWay/DriverMapActivity.html" title="class in com.CMPUT301W20T24.OnMyWay"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/CMPUT301W20T24/OnMyWay/DBManager.html" target="_top">Frames</a></li>
<li><a href="DBManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
